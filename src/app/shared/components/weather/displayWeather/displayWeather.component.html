<mat-card>
  <mat-spinner mode="indeterminate" *ngIf="weatherLoading$ | async"></mat-spinner>
  <mat-card-content *ngIf="vm$ | async as vm">
    <span class="fi fi-{{vm.location?.country | lowercase }}"></span> {{vm.location?.name}} - {{vm.location?.state}}

    <table mat-table [dataSource]="displayWeekInfo ? vm.weather.daily : [vm.weather.current]">
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <ng-container [matColumnDef]="displayColumnsEnum.DATE">
        <th mat-header-cell *matHeaderCellDef> Datum. </th>
        <td mat-cell *matCellDef="let element"> {{element.dt | date:'EEE'}} {{element.dt | date}} </td>
      </ng-container>

      <ng-container [matColumnDef]="displayColumnsEnum.TEMP">
        <th mat-header-cell *matHeaderCellDef> Temperatuur. </th>
        <td mat-cell *matCellDef="let element"> {{element.temp | temperature}} </td>
      </ng-container>

      <ng-container [matColumnDef]="displayColumnsEnum.CLOUDS">
        <th mat-header-cell *matHeaderCellDef> Bewolking. </th>
        <td mat-cell *matCellDef="let element"> {{element.clouds}}% </td>
      </ng-container>

      <ng-container [matColumnDef]="displayColumnsEnum.WIND_SPEED">
        <th mat-header-cell *matHeaderCellDef> Windkracht. </th>
        <td mat-cell *matCellDef="let element"> {{element.wind_speed}} km/u </td>
      </ng-container>

      <ng-container [matColumnDef]="displayColumnsEnum.PROBABILITY_OF_PRECIPITATION">
        <th mat-header-cell *matHeaderCellDef> Neerslag. </th>
        <td mat-cell *matCellDef="let element"> {{element.pop}} mm</td>
      </ng-container>
    </table>

    <button
      mat-flat-button
      color="primary"
      (click)="displayWeekInfo = !displayWeekInfo">
      {{ displayWeekInfo ? 'Toon vandaag' : 'Toon de hele week'}}
    </button>
  </mat-card-content>
</mat-card>
